define ("filter_rating/star_rating",["jquery","core/ajax","core/notification","core/templates"],function(a,b,c,d){var e=function(b,e){var f=this;this.root=a(b);this.contextid=e;this.options=this.root.data("options");console.log(this.options);this.root.on("click","[data-action=set-rating]",function(b){f.setRating(a(b.currentTarget).data("value")).done(function(a){for(var b=[],e=a.rating.rating*f.options.scale,g=1;g<=f.options.numberofstars;g++){b.push({fullstar:g<=e,halfstar:g>e&&g<e+1,rating:g/f.options.scale})}d.render("filter_rating/stars",{stars:b,myrating:1}).then(function(a){f.root.html(a)}).fail(c.exception)})})};e.prototype.refresh=function(){var a=this;this.getAverageRating().done(function(b){for(var e=b*a.options.scale,f=[],g=1;g<=a.options.numberofstars;g++){f.push({fullstar:g<=e,halfstar:g>e&&g<e+1,rating:g/a.options.scale})}console.log(f);d.render("filter_rating/stars",{stars:f}).then(function(b){a.root.html(b)}).fail(c.exception)}).fail(c.exception)};e.prototype.getAverageRating=function(){return b.call([{methodname:"filter_rating_get_average_rating",args:{contextid:this.contextid}}])[0]};e.prototype.setRating=function(a){return b.call([{methodname:"filter_rating_set_rating",args:{contextid:this.contextid,rating:a}}])[0]};return e});
//# sourceMappingURL=star_rating.min.js.map
